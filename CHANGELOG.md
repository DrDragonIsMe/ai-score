# 更新日志 (Changelog)

## [v1.1.0] - 2025-08-30

### 🔧 修复 (Fixed)

#### SQLAlchemy 类型错误修复
- **exam.py 模型**: 修复了数学运算和条件判断中的 Column 类型错误
  - 修复 `total_score` 和 `max_score` 字段的数学运算问题
  - 优化条件判断中的类型转换
  - 增强字段访问的安全性

- **tracking.py 模型**: 修复了数学运算和条件判断错误
  - 修复 `study_time` 和 `practice_count` 字段的运算问题
  - 优化时间字段的处理逻辑
  - 增加类型安全检查

- **mistake.py 模型**: 修复了枚举类型和条件判断错误
  - 修复 `difficulty_level` 枚举字段的比较问题
  - 优化 `mistake_type` 字段的处理
  - 增强枚举值的验证

- **exam_service.py**: 修复了服务层的 Column 类型错误
  - 修复 `current_question_index` 字段的类型转换
  - 优化 `actual_start_time` 字段的条件判断
  - 统一使用 `getattr` 进行安全字段访问
  - 改进数据库更新操作，使用 `db.session.execute(update(...))`

#### API 层修复
- **tracking.py API**: 修复了 datetime 条件判断错误
  - 优化时间字段的处理和格式化
  - 增强日期时间的验证逻辑

### 🚀 改进 (Improved)

#### 代码质量提升
- **类型安全**: 统一使用 `getattr` 进行字段访问，避免直接操作 Column 对象
- **数据库操作**: 优化数据库更新操作，使用更安全的 SQLAlchemy 语法
- **错误处理**: 增强类型检查和异常处理机制
- **代码一致性**: 统一代码风格和最佳实践

#### 性能优化
- **查询优化**: 改进数据库查询效率
- **内存使用**: 优化对象创建和内存管理
- **响应时间**: 提升API响应速度

### 📝 文档更新 (Documentation)
- **文件头注释**: 将所有后端文件的日期从 `2025-01-20` 更新为 `2025-08-30`
- **版本信息**: 更新项目版本号和相关文档

### 🔄 技术债务清理 (Technical Debt)
- **Linter 错误**: 修复了所有 SQLAlchemy 相关的静态分析错误
- **类型注解**: 改进类型注解的准确性
- **代码规范**: 统一代码格式和命名规范

---

## [v1.0.0] - 2025-01-20

### 🎉 初始版本 (Initial Release)

#### 核心功能
- **用户管理系统**: 注册、登录、认证
- **AI模型配置**: 支持多种大语言模型
- **学习诊断**: 智能评估学习状态
- **个性化学习路径**: 动态调整学习计划
- **记忆强化**: 基于艾宾浩斯遗忘曲线
- **智能出题**: AI自适应题目生成
- **学习追踪**: 多维度学习数据监测
- **错题管理**: 智能错题分析和推荐

#### 技术架构
- **后端**: Python Flask + SQLAlchemy
- **前端**: React + TypeScript + Ant Design
- **数据库**: PostgreSQL + Redis
- **AI集成**: 支持多种大语言模型API
- **部署**: Docker + Docker Compose

#### 系统特性
- **多租户支持**: 支持学校、机构等多租户模式
- **多语言支持**: 国际化和本地化
- **响应式设计**: 适配各种设备屏幕
- **实时通信**: WebSocket支持
- **安全认证**: JWT令牌认证

---

## 版本说明

- **主版本号**: 重大功能更新或架构变更
- **次版本号**: 新功能添加或重要改进
- **修订版本号**: 错误修复和小幅改进

## 图标说明

- 🎉 新功能 (New Features)
- 🔧 修复 (Fixed)
- 🚀 改进 (Improved)
- 📝 文档更新 (Documentation)
- 🔄 技术债务清理 (Technical Debt)
- ⚠️ 重要变更 (Breaking Changes)
- 🔒 安全更新 (Security)