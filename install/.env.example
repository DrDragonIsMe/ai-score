# AI智能学习系统 - 环境变量配置模板 (v1.2.0)
# 复制此文件为 .env 并填入正确的配置信息
# 更新日期: 2025-01-15

# ===========================================
# 基础配置
# ===========================================

# Flask 环境配置
FLASK_ENV=development
FLASK_DEBUG=True
SECRET_KEY=your_secret_key_here_please_change_this

# 应用配置
APP_NAME=AI智能学习系统
APP_VERSION=1.0.0
APP_HOST=0.0.0.0
APP_PORT=5000

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL 数据库
DATABASE_URL=postgresql://username:password@localhost:5432/ai_score
# 或者使用 SQLite（开发环境）
# DATABASE_URL=sqlite:///ai_score.db

# 数据库连接池配置
DATABASE_POOL_SIZE=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ===========================================
# 缓存配置
# ===========================================

# Redis 配置
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0

# 缓存配置
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=ai_score:

# ===========================================
# JWT 认证配置
# ===========================================

# JWT 密钥（请更改为随机字符串）
JWT_SECRET_KEY=your_jwt_secret_key_here_please_change_this

# JWT 过期时间（秒）
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000

# JWT 算法
JWT_ALGORITHM=HS256

# ===========================================
# AI 模型配置
# ===========================================

# OpenAI 配置（必须配置）
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# 其他 AI 服务配置（可选）
# AZURE_OPENAI_API_KEY=your_azure_api_key
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_VERSION=2023-05-15

# 百度文心一言配置（可选）
# BAIDU_API_KEY=your_baidu_api_key
# BAIDU_SECRET_KEY=your_baidu_secret_key

# ===========================================
# 邮件配置
# ===========================================

# SMTP 服务器配置
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USE_SSL=False

# 邮箱账户信息
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password
MAIL_DEFAULT_SENDER=your_email@gmail.com

# 邮件模板配置
MAIL_SUBJECT_PREFIX=[AI学习系统]

# ===========================================
# 文件上传配置
# ===========================================

# 上传目录
UPLOAD_FOLDER=uploads
UPLOAD_TEMP_FOLDER=temp

# 文件大小限制（字节）
MAX_CONTENT_LENGTH=16777216  # 16MB
MAX_FILE_SIZE=10485760       # 10MB

# 允许的文件类型
ALLOWED_EXTENSIONS=txt,pdf,png,jpg,jpeg,gif,doc,docx,xls,xlsx,ppt,pptx

# 图片处理配置
IMAGE_MAX_WIDTH=1920
IMAGE_MAX_HEIGHT=1080
IMAGE_QUALITY=85

# 用户头像配置
AVATAR_UPLOAD_FOLDER=uploads/avatars
AVATAR_MAX_SIZE=2097152  # 2MB
AVATAR_ALLOWED_EXTENSIONS=png,jpg,jpeg,gif
AVATAR_RESIZE_WIDTH=200
AVATAR_RESIZE_HEIGHT=200

# ===========================================
# 日志配置
# ===========================================

# 日志级别
LOG_LEVEL=INFO

# 日志文件配置
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# 日志格式
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ===========================================
# 安全配置
# ===========================================

# 密码加密配置
PASSWORD_HASH_METHOD=pbkdf2:sha256
PASSWORD_SALT_LENGTH=16

# 会话配置
SESSION_COOKIE_SECURE=False  # 生产环境设为 True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=True

# ===========================================
# 限流配置
# ===========================================

# API 限流
RATELIMIT_ENABLED=True
RATELIMIT_DEFAULT=100 per hour
RATELIMIT_STORAGE_URL=redis://localhost:6379/1

# 登录限流
LOGIN_RATELIMIT=5 per minute
REGISTER_RATELIMIT=3 per minute

# ===========================================
# 任务队列配置
# ===========================================

# Celery 配置
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# ===========================================
# 监控配置
# ===========================================

# 性能监控
MONITORING_ENABLED=True
METRICS_ENABLED=True

# 健康检查
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_ENDPOINT=/health

# ===========================================
# 多租户配置
# ===========================================

# 多租户支持
MULTI_TENANT_ENABLED=True
DEFAULT_TENANT_ID=1

# 租户数据隔离
TENANT_ISOLATION_LEVEL=schema  # schema, database, or shared

# ===========================================
# 国际化配置
# ===========================================

# 默认语言
DEFAULT_LANGUAGE=zh_CN
SUPPORTED_LANGUAGES=zh_CN,en_US

# 时区配置
DEFAULT_TIMEZONE=Asia/Shanghai

# ===========================================
# 开发配置
# ===========================================

# 调试配置
DEBUG_TB_ENABLED=False
DEBUG_TB_INTERCEPT_REDIRECTS=False

# 测试配置
TESTING=False
TEST_DATABASE_URL=sqlite:///:memory:

# ===========================================
# 生产环境配置
# ===========================================

# 生产环境标识
PRODUCTION=False

# 服务器配置
WORKERS=4
WORKER_CLASS=sync
WORKER_TIMEOUT=30
KEEPALIVE=2

# SSL 配置
SSL_CERT_PATH=
SSL_KEY_PATH=
SSL_ENABLED=False

# ===========================================
# 第三方服务配置
# ===========================================

# 短信服务配置（可选）
SMS_PROVIDER=aliyun
SMS_ACCESS_KEY=
SMS_SECRET_KEY=
SMS_SIGN_NAME=
SMS_TEMPLATE_CODE=

# 对象存储配置（可选）
OSS_PROVIDER=aliyun
OSS_ACCESS_KEY=
OSS_SECRET_KEY=
OSS_BUCKET_NAME=
OSS_ENDPOINT=

# CDN 配置（可选）
CDN_DOMAIN=
CDN_ENABLED=False

# ===========================================
# 自定义配置
# ===========================================

# 业务配置
DEFAULT_STUDY_TIME=30  # 默认学习时间（分钟）
MAX_QUESTION_COUNT=50  # 最大题目数量
DEFAULT_DIFFICULTY=medium  # 默认难度

# AI助手配置
AI_ASSISTANT_DEFAULT_NICKNAME=AI助手  # 默认AI助手昵称
AI_ASSISTANT_MAX_NICKNAME_LENGTH=20  # 昵称最大长度
AI_ASSISTANT_CONTEXT_ENABLED=True  # 启用上下文感知
AI_ASSISTANT_MEMORY_ENABLED=True  # 启用对话记忆

# 记忆曲线配置
MEMORY_INTERVALS=1,3,7,15,30  # 复习间隔（天）
MEMORY_THRESHOLD=0.8  # 记忆阈值

# 学习路径配置
PATH_MAX_DEPTH=10  # 学习路径最大深度
PATH_BRANCH_FACTOR=3  # 分支因子