# AIæ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ - éƒ¨ç½²æŒ‡å—

**ç‰ˆæœ¬**: v1.2.2  
**æ›´æ–°æ—¥æœŸ**: 2025-01-15  
**é€‚ç”¨ç¯å¢ƒ**: macOS, Linux, Windows

## ğŸ†• v1.2.2 æ›´æ–°å†…å®¹

- **ä¾èµ–æ›´æ–°**: æ›´æ–°å‰ç«¯å’Œåç«¯ä¾èµ–åŒ…åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
- **è¯Šæ–­å·¥å…·**: æ–°å¢å­¦ä¹ åˆ†æè¯Šæ–­è„šæœ¬å’Œæ•°æ®ä¿®å¤å·¥å…·
- **è‡ªåŠ¨åŒ–è„šæœ¬**: æ·»åŠ ç³»ç»Ÿå¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤åŠŸèƒ½
- **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’ŒAPIå“åº”é€Ÿåº¦
- **å®‰å…¨å¢å¼º**: å¢å¼ºå‰ç«¯è®¤è¯ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§  

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [å¿«é€Ÿéƒ¨ç½²](#å¿«é€Ÿéƒ¨ç½²)
- [å¼€å‘ç¯å¢ƒ](#å¼€å‘ç¯å¢ƒ)
- [ç”Ÿäº§ç¯å¢ƒ](#ç”Ÿäº§ç¯å¢ƒ)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [ç»´æŠ¤æŒ‡å—](#ç»´æŠ¤æŒ‡å—)

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®

- **æ“ä½œç³»ç»Ÿ**: macOS 10.15+, Ubuntu 18.04+, Windows 10+
- **å†…å­˜**: 4GB RAM
- **å­˜å‚¨**: 2GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### æ¨èé…ç½®

- **æ“ä½œç³»ç»Ÿ**: macOS 12+, Ubuntu 20.04+, Windows 11+
- **å†…å­˜**: 8GB+ RAM
- **å­˜å‚¨**: 10GB+ å¯ç”¨ç©ºé—´
- **å¤„ç†å™¨**: å¤šæ ¸å¤„ç†å™¨

### è½¯ä»¶ä¾èµ–

- **Python**: 3.8+ (æ¨è 3.9+)
- **Node.js**: 16+ (æ¨è 18+)
- **æ•°æ®åº“**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **Git**: æœ€æ–°ç‰ˆæœ¬

## ğŸš€ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… Python

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install python@3.9

# Ubuntu
sudo apt update
sudo apt install python3.9 python3.9-pip python3.9-venv

# Windows
# ä» https://python.org ä¸‹è½½å¹¶å®‰è£…
```

### 2. å®‰è£… Node.js

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install node@18

# Ubuntu
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Windows
# ä» https://nodejs.org ä¸‹è½½å¹¶å®‰è£…
```

### 3. éªŒè¯å®‰è£…

```bash
python3 --version  # åº”æ˜¾ç¤º 3.8+
node --version     # åº”æ˜¾ç¤º 16+
npm --version      # åº”æ˜¾ç¤º 8+
git --version      # åº”æ˜¾ç¤º 2.0+
```

## âš¡ å¿«é€Ÿéƒ¨ç½²

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd ai-score
```

### 2. è‡ªåŠ¨å®‰è£…è„šæœ¬ (æ¨è)

```bash
# macOS ç”¨æˆ·
./install/install_macos.sh

# æ‰‹åŠ¨å®‰è£…
./install/manual_install.sh
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd backend
source venv/bin/activate  # Windows: venv\Scripts\activate
FLASK_APP=app.py FLASK_ENV=development FLASK_DEBUG=1 flask run --host=0.0.0.0 --port=5001

# å¯åŠ¨å‰ç«¯æœåŠ¡ (æ–°ç»ˆç«¯)
cd frontend
npm run dev
```

### 4. è®¿é—®ç³»ç»Ÿ

- **å‰ç«¯ç•Œé¢**: http://localhost:5173
- **åç«¯API**: http://localhost:5001
- **APIæ–‡æ¡£**: http://localhost:5001/api/docs

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒ

### åç«¯å¼€å‘ç¯å¢ƒ

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# åˆå§‹åŒ–æ•°æ®åº“
flask db init
flask db migrate -m "Initial migration"
flask db upgrade

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
FLASK_APP=app.py FLASK_ENV=development FLASK_DEBUG=1 flask run --host=0.0.0.0 --port=5001
```

### å‰ç«¯å¼€å‘ç¯å¢ƒ

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

### å¼€å‘å·¥å…·é…ç½®

#### VS Code æ¨èæ’ä»¶

```json
{
  "recommendations": [
    "ms-python.python",
    "ms-python.flake8",
    "ms-python.black-formatter",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next"
  ]
}
```

#### ä»£ç æ ¼å¼åŒ–

```bash
# Python ä»£ç æ ¼å¼åŒ–
black backend/
flake8 backend/

# JavaScript ä»£ç æ ¼å¼åŒ–
npx prettier --write frontend/src/
npx eslint frontend/src/ --fix
```

## ğŸ­ ç”Ÿäº§ç¯å¢ƒ

### 1. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/ai_score

# å®‰å…¨é…ç½®
SECRET_KEY=your-secret-key-here
JWT_SECRET_KEY=your-jwt-secret-key

# API é…ç½®
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1

# åº”ç”¨é…ç½®
FLASK_ENV=production
FLASK_DEBUG=0
PORT=5001
```

### 2. æ•°æ®åº“é…ç½®

#### PostgreSQL å®‰è£…

```bash
# macOS
brew install postgresql
brew services start postgresql

# Ubuntu
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres createdb ai_score
sudo -u postgres createuser --interactive
```

### 3. ä½¿ç”¨ Docker éƒ¨ç½²

#### Dockerfile (åç«¯)

```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5001

CMD ["gunicorn", "--bind", "0.0.0.0:5001", "app:app"]
```

#### docker-compose.yml

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "5001:5001"
    environment:
      - DATABASE_URL=postgresql://postgres:password@db:5432/ai_score
    depends_on:
      - db

  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=ai_score
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

### 4. ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5173;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /api {
        proxy_pass http://localhost:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯é…ç½®æ–‡ä»¶

#### `backend/config/config.py`

```python
import os
from datetime import timedelta

class Config:
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'dev-secret-key'
    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///app.db'
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    JWT_SECRET_KEY = os.environ.get('JWT_SECRET_KEY') or 'jwt-secret-key'
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(hours=1)
    
class DevelopmentConfig(Config):
    DEBUG = True
    
class ProductionConfig(Config):
    DEBUG = False
```

### å‰ç«¯é…ç½®æ–‡ä»¶

#### `frontend/vite.config.js`

```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:5001',
        changeOrigin: true
      }
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: true
  }
})
```

## ğŸ” æ•…éšœæ’é™¤

### ä¾èµ–æ›´æ–°é—®é¢˜

#### 1. Python ä¾èµ–æ›´æ–°

```bash
# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
pip list --outdated

# æ›´æ–°æ‰€æœ‰åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade -r requirements.txt

# å¦‚æœé‡åˆ°å†²çªï¼Œä½¿ç”¨pip-tools
pip install pip-tools
pip-compile --upgrade requirements.in
pip-sync requirements.txt

# æ£€æŸ¥å®‰å…¨æ¼æ´
pip install pip-audit
pip-audit
```

#### 2. Node.js ä¾èµ–æ›´æ–°

```bash
# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
npm outdated

# æ›´æ–°æ‰€æœ‰ä¾èµ–
npm update

# æ›´æ–°åˆ°æœ€æ–°ä¸»ç‰ˆæœ¬ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
npx npm-check-updates -u
npm install

# æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit
npm audit fix
```

#### 3. å­¦ä¹ åˆ†æè¯Šæ–­å·¥å…·

```bash
# è¿è¡Œå­¦ä¹ åˆ†æè¯Šæ–­è„šæœ¬
cd backend
python diagnostic_scripts/learning_analytics_check.py

# æ•°æ®ä¿®å¤å·¥å…·
python repair_scripts/fix_learning_data.py

# ç³»ç»Ÿå¥åº·æ£€æŸ¥
python health_check.py --full
```

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å ç”¨

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :5001
lsof -i :5173

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
psql -h localhost -U postgres -d ai_score

# é‡ç½®æ•°æ®åº“
flask db downgrade
flask db upgrade
```

#### 3. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜
pip cache purge
npm cache clean --force

# é‡æ–°å®‰è£…
pip install -r requirements.txt --force-reinstall
npm install --force
```

#### 4. æƒé™é—®é¢˜

```bash
# macOS/Linux
sudo chown -R $USER:$USER .
chmod +x install/*.sh

# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)
```

#### 5. å­¦ä¹ åˆ†æåŠŸèƒ½å¼‚å¸¸

```bash
# æ£€æŸ¥å­¦ä¹ åˆ†æAPIçŠ¶æ€
curl -X GET "http://localhost:5001/api/learning-analytics/dashboard" \
  -H "Authorization: Bearer YOUR_TOKEN"

# ä¿®å¤å­¦ä¹ åˆ†ææ•°æ®
cd backend
python repair_scripts/fix_analytics_data.py

# é‡å»ºå­¦ä¹ åˆ†æç´¢å¼•
python manage.py rebuild_analytics_index
```

#### 6. è®¤è¯ç³»ç»Ÿé—®é¢˜

```bash
# æ£€æŸ¥JWTé…ç½®
echo $JWT_SECRET_KEY

# æ¸…é™¤è®¤è¯ç¼“å­˜
redis-cli FLUSHDB

# é‡æ–°ç”ŸæˆJWTå¯†é’¥
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# åç«¯æ—¥å¿—
tail -f backend/logs/app.log

# å‰ç«¯å¼€å‘æœåŠ¡å™¨æ—¥å¿—
# ç›´æ¥åœ¨ç»ˆç«¯æŸ¥çœ‹

# ç³»ç»Ÿæ—¥å¿—
# macOS
log show --predicate 'process == "python"' --last 1h

# Linux
journalctl -u your-service-name -f
```

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### å®šæœŸç»´æŠ¤ä»»åŠ¡

#### æ¯æ—¥æ£€æŸ¥ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰

```bash
#!/bin/bash
# daily_check.sh - æ¯æ—¥è‡ªåŠ¨æ£€æŸ¥è„šæœ¬

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl -f http://localhost:5001/api/health || echo "Backend down"
curl -f http://localhost:5173 || echo "Frontend down"

# æ£€æŸ¥å­¦ä¹ åˆ†æåŠŸèƒ½
curl -f http://localhost:5001/api/learning-analytics/health || echo "Analytics down"

# æ£€æŸ¥æ—¥å¿—é”™è¯¯
grep -i error backend/logs/*.log | tail -10

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
psql -h localhost -U postgres -d ai_score -c "SELECT 1;" || echo "Database connection failed"

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h | grep -E '(8[0-9]|9[0-9])%' && echo "Disk space warning"

# æ€§èƒ½ç›‘æ§
python backend/performance_monitor.py --daily
```

#### æ¯å‘¨ç»´æŠ¤ï¼ˆå¢å¼ºç‰ˆï¼‰

```bash
#!/bin/bash
# weekly_maintenance.sh

# ä¾èµ–æ›´æ–°æ£€æŸ¥
echo "=== æ£€æŸ¥Pythonä¾èµ–æ›´æ–° ==="
pip list --outdated

echo "=== æ£€æŸ¥Node.jsä¾èµ–æ›´æ–° ==="
npm outdated

# æ•°æ®åº“ä¼˜åŒ–
echo "=== æ•°æ®åº“ç»´æŠ¤ ==="
psql -h localhost -U postgres -d ai_score -c "VACUUM ANALYZE;"
psql -h localhost -U postgres -d ai_score -c "REINDEX DATABASE ai_score;"

# æ•°æ®åº“å¤‡ä»½
echo "=== æ•°æ®åº“å¤‡ä»½ ==="
pg_dump ai_score > backup_$(date +%Y%m%d).sql
gzip backup_$(date +%Y%m%d).sql

# æ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
echo "=== æ¸…ç†ç³»ç»Ÿ ==="
find backend/logs -name "*.log" -mtime +7 -delete
find backend/temp -name "*" -mtime +3 -delete

# å­¦ä¹ åˆ†ææ•°æ®æ¸…ç†
python backend/cleanup_analytics.py --older-than 30
```

#### æ¯æœˆç»´æŠ¤ï¼ˆå…¨é¢ä¼˜åŒ–ï¼‰

```bash
#!/bin/bash
# monthly_maintenance.sh

# ç³»ç»Ÿæ›´æ–°
echo "=== ç³»ç»Ÿæ›´æ–° ==="
brew update && brew upgrade  # macOS
# sudo apt update && sudo apt upgrade  # Ubuntu

# å®‰å…¨æ‰«æ
echo "=== å®‰å…¨æ‰«æ ==="
pip-audit --format=json --output=security_report.json
npm audit --json > npm_security_report.json

# æ€§èƒ½åˆ†æ
echo "=== æ€§èƒ½åˆ†æ ==="
python backend/performance_analyzer.py --full-report

# æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
echo "=== æ•°æ®åº“æ€§èƒ½ä¼˜åŒ– ==="
psql -h localhost -U postgres -d ai_score -f backend/sql/optimize_queries.sql

# å­¦ä¹ åˆ†ææ•°æ®ç»Ÿè®¡
echo "=== å­¦ä¹ åˆ†æç»Ÿè®¡ ==="
python backend/analytics_stats.py --monthly-report
```

### å¤‡ä»½ç­–ç•¥

#### æ•°æ®åº“å¤‡ä»½

```bash
#!/bin/bash
# backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/path/to/backups"

# åˆ›å»ºå¤‡ä»½
pg_dump ai_score > "$BACKUP_DIR/ai_score_$DATE.sql"

# å‹ç¼©å¤‡ä»½
gzip "$BACKUP_DIR/ai_score_$DATE.sql"

# åˆ é™¤7å¤©å‰çš„å¤‡ä»½
find "$BACKUP_DIR" -name "*.sql.gz" -mtime +7 -delete

echo "Backup completed: ai_score_$DATE.sql.gz"
```

#### ä»£ç å¤‡ä»½

```bash
# è‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“
git add .
git commit -m "Auto backup $(date)"
git push origin main

# åˆ›å»ºæ ‡ç­¾
git tag -a "backup-$(date +%Y%m%d)" -m "Daily backup"
git push origin --tags
```

### ç›‘æ§å’Œå‘Šè­¦

#### å¥åº·æ£€æŸ¥ç«¯ç‚¹

```python
# backend/api/health.py
from flask import Blueprint, jsonify
from datetime import datetime

health_bp = Blueprint('health', __name__)

@health_bp.route('/health')
def health_check():
    return jsonify({
        'status': 'healthy',
        'timestamp': datetime.utcnow().isoformat(),
        'version': '1.1.0'
    })
```

#### ç®€å•ç›‘æ§è„šæœ¬

```bash
#!/bin/bash
# monitor.sh

check_service() {
    local url=$1
    local name=$2
    
    if curl -f -s "$url" > /dev/null; then
        echo "âœ… $name is healthy"
    else
        echo "âŒ $name is down"
        # å‘é€å‘Šè­¦é‚®ä»¶æˆ–é€šçŸ¥
    fi
}

check_service "http://localhost:5001/api/health" "Backend"
check_service "http://localhost:5173" "Frontend"
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©

1. **æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›® `install/` ç›®å½•ä¸‹çš„ç›¸å…³æ–‡æ¡£
2. **æ—¥å¿—**: æ£€æŸ¥ `backend/logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
3. **GitHub Issues**: åœ¨é¡¹ç›®ä»“åº“æäº¤é—®é¢˜
4. **æŠ€æœ¯ç¤¾åŒº**: ç›¸å…³æŠ€æœ¯æ ˆçš„å®˜æ–¹ç¤¾åŒº

### æŠ¥å‘Šé—®é¢˜

æäº¤é—®é¢˜æ—¶è¯·åŒ…å«ï¼š

- æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
- Python å’Œ Node.js ç‰ˆæœ¬
- é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—
- å¤ç°æ­¥éª¤
- ç³»ç»Ÿé…ç½®ä¿¡æ¯

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-08-30  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ